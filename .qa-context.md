# QA Project Context

Generated: February 4, 2026 | Agent: project-bootstrap-agent
Status: NEW PROJECT

## 1. Project Identity

- **Project Name**: performance-k6-typescript
- **Group ID**: N/A (no namespace required)
- **Project Type**: Performance Testing
- **Language**: TypeScript
- **Performance Framework**: k6
- **Build Tool**: npm
- **BDD**: N/A (performance testing)
- **Reporting**: JSON, HTML, cloud integration

## 2. Target Structure

### Performance (k6) Project Structure

```
performance-k6-typescript/
├── package.json
├── tsconfig.json
├── webpack.config.js
├── .env.example
├── .gitignore
├── src/
│   ├── config/
│   │   ├── config.ts          # Options & thresholds
│   │   ├── environments.ts    # Environment configs
│   │   └── thresholds.ts      # SLA definitions
│   ├── utils/
│   │   ├── http.ts            # HTTP helper functions
│   │   ├── auth.ts            # Authentication helpers
│   │   ├── checks.ts          # Reusable checks
│   │   ├── metrics.ts         # Custom metrics
│   │   └── rate-limit.ts      # Rate limit validation
│   └── tests/
│       ├── load-test.ts       # Load test template
│       ├── stress-test.ts     # Stress test template
│       ├── spike-test.ts      # Spike test template
│       └── endurance-test.ts  # Endurance/Soak test template
├── data/
│   ├── test-data.csv          # Sample test data
│   └── users.csv              # User data
├── results/
│   ├── json/                  # JSON output
│   └── html/                  # HTML reports
├── docs/
│   └── test-plans/            # Test planning docs
└── README.md
```

## 3. Naming Conventions (Established)

### Performance Testing Naming (k6 + TypeScript)

| Element              | Pattern                      | Example                           |
| -------------------- | ---------------------------- | --------------------------------- |
| Test file            | {type}-test.ts               | load-test.ts, stress-test.ts      |
| Config file          | config.ts                    | config.ts                         |
| Metrics file         | metrics.ts                   | metrics.ts                        |
| Helper modules       | {purpose}.ts                 | auth.ts, checks.ts, http.ts       |
| Test data            | {entity}.csv / {entity}.json | users.csv, products.json          |
| Function names       | camelCase                    | executeLoadTest, validateResponse |
| Custom metric        | snake_case                   | login_duration, checkout_success  |
| Environment variable | UPPER_SNAKE_CASE             | BASE_URL, API_KEY                 |

## 4. Configuration

- **Environments**: dev, qa, staging, prod
- **Base URLs**:
  - dev: TBD
  - qa: TBD
  - staging: TBD
  - prod: https://api.practicesoftwaretesting.com/status
- **Auth**: API Key
- **Config format**: .env + TypeScript config files

### Performance Configuration

- **Primary Test Types**: load, stress, spike, endurance
- **Load Targets**: Will be defined per user story
- **SLA Requirements**: To be defined
- **VU Limits per Environment**: Will be defined per user story
- **Test Durations**: Will be defined per test
- **Application Type**: REST API
- **Auth Mechanism**: API Key
- **Monitoring/Output**: JSON files, HTML reports, cloud integration capability
- **Test Data**: CSV files

## 5. Execution Commands

### TypeScript Compilation & Bundle

- **Install dependencies**: `npm install`
- **Build TypeScript**: `npm run build`
- **Watch mode**: `npm run build:watch`

### k6 Tests

- **Smoke test**: `npm run test:smoke`
- **Load test**: `npm run test:load`
- **Stress test**: `npm run test:stress`
- **Spike test**: `npm run test:spike`
- **Endurance test**: `npm run test:endurance`
- **All tests**: `npm test`

### With Environment Variables

- **Specific environment**: `ENV=staging npm run test:load`
- **Custom VUs**: `VUS=100 npm run test:load`
- **Custom duration**: `DURATION=30m npm run test:load`

### Output Options

- **JSON output**: `k6 run --out json=results/json/output.json dist/load-test.js`
- **HTML report**: Generated automatically after test run

## 6. CI/CD

- **Platform**: GitHub Actions
- **Pipeline file**: .github/workflows/k6-tests.yml

## 7. Rules for Other Agents

### MUST Follow (Performance - k6 + TypeScript)

- All test files must be in TypeScript and transpiled via webpack
- All HTTP requests must include `tags: { endpoint: 'name' }` for threshold filtering
- Use `SharedArray` for loading test data files (CSV, JSON)
- Custom metrics must be defined in `src/utils/metrics.ts` and imported
- Authentication must happen in `setup()` function or once per VU
- Use `group()` to organize related requests into transactions
- All thresholds must be defined in `src/config/thresholds.ts`
- Use environment variables for sensitive data (API keys) via .env
- Configuration options must be in `src/config/config.ts`
- Modular structure: tests in `src/tests/`, helpers in `src/utils/`
- All imports must use TypeScript syntax
- Type definitions for k6 must be from @types/k6

### MUST NOT Do (Performance - k6)

- Do not make HTTP requests in init phase (outside functions)
- Do not use `sleep()` without think time rationale
- Do not weaken existing thresholds to make tests pass
- Do not create monolithic scripts - use modular structure
- Do not hardcode test data - use data files or generators
- Do not skip tagging HTTP requests
- Do not hardcode sensitive data - use environment variables
- Do not commit .env files with real credentials
- Do not use JavaScript syntax - always use TypeScript

## 8. Next Steps

### Immediate Tasks

1. ✅ Bootstrap project structure
2. ✅ Configure TypeScript and webpack
3. ✅ Create base test templates
4. ✅ Create utility functions
5. ✅ Document setup and usage

### For Test Development

1. Define specific load targets and SLA requirements per test
2. Create test data files (CSV format)
3. Configure environment-specific base URLs
4. Implement specific API test scenarios
5. Set up CI/CD pipeline (GitHub Actions)
6. Configure cloud integration if needed (Grafana Cloud, InfluxDB)

### For Integration

1. Add API endpoint-specific tests
2. Configure thresholds based on SLA requirements
3. Set up continuous performance monitoring
4. Integrate with existing CI/CD workflows
5. Create dashboards for results visualization

## 9. Technical Stack

- **k6**: Latest version
- **TypeScript**: ^5.0.0
- **Webpack**: ^5.0.0 (for bundling TypeScript)
- **ts-loader**: For webpack TypeScript compilation
- **@types/k6**: Type definitions
- **dotenv**: Environment variable management

## 10. JIRA Reference

- **Ticket**: INTTP002-163
- **Summary**: Setup k6 Performance Testing Framework with TypeScript
- **Story Points**: 8
- **Status**: Done
- **Priority**: High
- **Assignee**: Antonio Crespo

## 11. Key Features

- ✅ TypeScript support for type safety and better IDE support
- ✅ Modular architecture for reusability
- ✅ Multiple test type templates (load, stress, spike, endurance)
- ✅ Environment-based configuration
- ✅ Utility functions for common operations
- ✅ Custom metrics support
- ✅ Comprehensive error checking and validation
- ✅ Rate limit validation utilities
- ✅ CI/CD ready
- ✅ Multiple output formats (JSON, HTML)
